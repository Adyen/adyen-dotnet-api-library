/*
 * Negative balance compensation warning 
 *
 * Adyen sends webhooks to inform you about balance accounts whose balance has been negative for 20 or more days. If you do not transfer funds to that balance account to cover the negative balance before the scheduled compensation date, a transfer is made from your liable balance account on that date.
 *
 * The version of the OpenAPI document: 1
 * Generated by: https://github.com/openapitools/openapi-generator.git
 */

#nullable enable

using System;
using System.Linq;
using Microsoft.Extensions.DependencyInjection;
using Adyen.Core.Auth;
using Adyen.NegativeBalanceWarningWebhooks.Client;

namespace Adyen.NegativeBalanceWarningWebhooks.Extensions
{
    /// <summary>
    /// Extension methods for ServiceCollection
    /// </summary>
    public static class ServiceCollectionExtensions
    {

        /// <summary>
        /// Add the Adyen NegativeBalanceWarningWebhooks API services to your host builder.
        /// </summary>
        /// <param name="services"></param>
        /// <param name="options"></param>
        public static void AddNegativeBalanceWarningWebhooksServices(this IServiceCollection services, Action<HostConfiguration> options)
        {
            HostConfiguration config = new(services);
            options(config);
            AddNegativeBalanceWarningWebhooksServices(services, config);
        }

        internal static void AddNegativeBalanceWarningWebhooksServices(IServiceCollection services, HostConfiguration host)
        {
            if (!host.HttpClientsAdded)
                host.AddNegativeBalanceWarningWebhooksHttpClients();

            // Adds utility handler for deserializing webhooks.
            services.AddSingleton<Adyen.NegativeBalanceWarningWebhooks.Handlers.INegativeBalanceWarningWebhooksHandler, Adyen.NegativeBalanceWarningWebhooks.Handlers.NegativeBalanceWarningWebhooksHandler>();
        }
    }
}
