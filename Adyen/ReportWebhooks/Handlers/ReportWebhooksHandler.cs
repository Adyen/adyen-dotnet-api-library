// <auto-generated>
/*
 * Report webhooks
 *
 * Adyen sends webhooks to inform your system that reports were generated and are ready to be downloaded.  You can download reports programmatically by making an HTTP GET request, or manually from your [Balance Platform Customer Area](https://balanceplatform-test.adyen.com/balanceplatform).
 *
 * The version of the OpenAPI document: 1
 * Generated by: https://github.com/openapitools/openapi-generator.git
 */

#nullable enable

using Microsoft.Extensions.Logging;
using System.Text.Json;
using Adyen.ReportWebhooks.Models;

namespace Adyen.ReportWebhooks.Handlers
{
    /// <summary>
    /// Interface for deserializing webhooks.
    /// </summary>
    public interface IReportWebhooksHandler
    {
        /// <summary>
        /// Returns the <see cref="JsonSerializerOptionsProvider"/> to deserialize the json payload from the webhook.
        /// </summary>
        Adyen.ReportWebhooks.Client.JsonSerializerOptionsProvider JsonSerializerOptionsProvider { get; }
            
        /// <summary>
        /// Uses <see cref="Adyen.ReportWebhooks.Client.JsonSerializerOptionsProvider"/> to attempt to deserialize <see cref="ReportNotificationRequest"/>.
        /// </summary>
        /// <exception cref="JsonException"></exception>
        ReportNotificationRequest? DeserializeReportNotificationRequest(string json);
    }

    /// <summary>
    /// Handler utility function used to deserialize ReportWebhooks.
    /// </summary>
    public partial class ReportWebhooksHandler : IReportWebhooksHandler
    {
        /// <inheritdoc/>
        public Adyen.ReportWebhooks.Client.JsonSerializerOptionsProvider JsonSerializerOptionsProvider { get; }
        
        /// <summary>
        /// Initializes the handler utility for deserializing ReportWebhooks.
        /// </summary>
        public ReportWebhooksHandler(Adyen.ReportWebhooks.Client.JsonSerializerOptionsProvider jsonSerializerOptionsProvider)
        {
            JsonSerializerOptionsProvider = jsonSerializerOptionsProvider;
        }

        /// <inheritdoc/>
        public ReportNotificationRequest? DeserializeReportNotificationRequest(string json)
        {
            return JsonSerializer.Deserialize<ReportNotificationRequest>(json, JsonSerializerOptionsProvider.Options);
        }

    }
}
