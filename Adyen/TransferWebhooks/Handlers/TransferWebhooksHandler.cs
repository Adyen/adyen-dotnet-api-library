// <auto-generated>
/*
 * Transfer webhooks
 *
 * Adyen sends webhooks to inform your system about incoming and outgoing transfers in your platform.  You can use these webhooks to build your implementation. For example, you can use this information to update balances in your own dashboards or to keep track of incoming funds.
 *
 * The version of the OpenAPI document: 4
 * Generated by: https://github.com/openapitools/openapi-generator.git
 */

#nullable enable

using Microsoft.Extensions.Logging;
using System.Text.Json;
using Adyen.TransferWebhooks.Models;

namespace Adyen.TransferWebhooks.Handlers
{
    /// <summary>
    /// Interface for deserializing webhooks.
    /// </summary>
    public interface ITransferWebhooksHandler
    {
        /// <summary>
        /// Returns the <see cref="JsonSerializerOptionsProvider"/> to deserialize the json payload from the webhook.
        /// </summary>
        Adyen.TransferWebhooks.Client.JsonSerializerOptionsProvider JsonSerializerOptionsProvider { get; }
            
        /// <summary>
        /// Uses <see cref="Adyen.TransferWebhooks.Client.JsonSerializerOptionsProvider"/> to attempt to deserialize <see cref="TransferNotificationRequest"/>.
        /// </summary>
        /// <exception cref="JsonException"></exception>
        TransferNotificationRequest? DeserializeTransferNotificationRequest(string json);
    }

    /// <summary>
    /// Handler utility function used to deserialize TransferWebhooks.
    /// </summary>
    public partial class TransferWebhooksHandler : ITransferWebhooksHandler
    {
        /// <inheritdoc/>
        public Adyen.TransferWebhooks.Client.JsonSerializerOptionsProvider JsonSerializerOptionsProvider { get; }
        
        /// <summary>
        /// Initializes the handler utility for deserializing TransferWebhooks.
        /// </summary>
        public TransferWebhooksHandler(Adyen.TransferWebhooks.Client.JsonSerializerOptionsProvider jsonSerializerOptionsProvider)
        {
            JsonSerializerOptionsProvider = jsonSerializerOptionsProvider;
        }

        /// <inheritdoc/>
        public TransferNotificationRequest? DeserializeTransferNotificationRequest(string json)
        {
            return JsonSerializer.Deserialize<TransferNotificationRequest>(json, JsonSerializerOptionsProvider.Options);
        }

    }
}
