/*
 * Configuration API
 *
 * The Configuration API allows you to manage your balance platform where you can create account holders, balance accounts, cards, and business accounts.  ## Authentication Each request to the Configuration API must be signed with an API key. Generate an API key in your Customer Area if you have a [platform setup](https://docs.adyen.com/platforms/manage-access/api-credentials-web-service/#generate-api-key) or [marketplace setup](https://docs.adyen.com/marketplaces/manage-access/api-credentials-web-service/#generate-api-key).   If you have an Adyen Issuing integration, [generate an API key](https://docs.adyen.com/issuing/manage-access/api-credentials-web-service/#generate-api-key) in your Balance Platform Customer Area.  To connect to the API, add an `X-API-Key` header with the API key as the value, for example:   ``` curl -H \"Content-Type: application/json\" \\ -H \"X-API-Key: YOUR_API_KEY\" \\ ... ```  ## Versioning The Configuration API supports [versioning](https://docs.adyen.com/development-resources/versioning) using a version suffix in the endpoint URL. This suffix has the following format: \"vXX\", where XX is the version number.  For example: ``` https://balanceplatform-api-test.adyen.com/bcl/v2/accountHolders ``` ## Going live When going live, generate an API key in your [live Customer Area](https://ca-live.adyen.com/ca/) if you have an Adyen for Platforms integration or [live Balance Platform Customer Area](https://balanceplatform-live.adyen.com/balanceplatform/) if you have an Adyen Issuing integration.You can then use the API key to send requests to `https://balanceplatform-api-live.adyen.com/bcl/v2`.
 *
 * The version of the OpenAPI document: 2
 * Generated by: https://github.com/openapitools/openapi-generator.git
 */

#nullable enable

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text.Json;
using System.Text.Json.Serialization;
using System.Net.Http;
using Microsoft.Extensions.DependencyInjection;
using Adyen.BalancePlatform.Services;
using Adyen.BalancePlatform.Client;
using Adyen.BalancePlatform.Models;
using Adyen.Core;
using Adyen.Core.Auth;
using Adyen.Core.Client;
using Adyen.Core.Options;
using Adyen.Core.Converters;

namespace Adyen.BalancePlatform.Client
{
    /// <summary>
    /// Provides hosting configuration for BalancePlatform
    /// </summary>
    public class HostConfiguration
    {
        private readonly IServiceCollection _services;
        private readonly JsonSerializerOptions _jsonOptions = new JsonSerializerOptions();
        private readonly AdyenOptions _adyenOptions = new AdyenOptions();
        
        /// <summary>
        /// The base path of the API, it includes the http(s)-scheme, the host domain name, and the base path.
        /// This value can change when `ConfigureAdyenOptions` is called in <see cref="HostConfiguration"/>). The new value will be based on the <see cref="AdyenOptions"/>.<see cref="AdyenEnvironment"/>.
        /// </summary>
        public static string BASE_URL = "https://balanceplatform-api-test.adyen.com/bcl/v2";
        
        /// <summary>
        /// Instantiates the HostConfiguration (custom JsonConverters, Events, HttpClient) with the necessary dependencies to communicate with the API.
        /// </summary>
        /// <param name="services"><see cref="IServiceCollection"/></param>
        public HostConfiguration(IServiceCollection services)
        {
            _services = services;
            if (_jsonOptions.Converters.FirstOrDefault(x => x.GetType() == typeof(JsonStringEnumConverter)) == null)
                _jsonOptions.Converters.Add(new JsonStringEnumConverter());
            if (_jsonOptions.Converters.FirstOrDefault(x => x.GetType() == typeof(DateTimeJsonConverter)) == null)
                _jsonOptions.Converters.Add(new DateTimeJsonConverter());
            if (_jsonOptions.Converters.FirstOrDefault(x => x.GetType() == typeof(DateTimeNullableJsonConverter)) == null)
                _jsonOptions.Converters.Add(new DateTimeNullableJsonConverter());
            if (_jsonOptions.Converters.FirstOrDefault(x => x.GetType() == typeof(ByteArrayConverter)) == null)
                _jsonOptions.Converters.Add(new ByteArrayConverter());
            if (_jsonOptions.Converters.FirstOrDefault(x => x.GetType() == typeof(DateOnlyJsonConverter)) == null)
                _jsonOptions.Converters.Add(new DateOnlyJsonConverter());
            if (_jsonOptions.Converters.FirstOrDefault(x => x.GetType() == typeof(DateOnlyNullableJsonConverter)) == null)
                _jsonOptions.Converters.Add(new DateOnlyNullableJsonConverter());
            _jsonOptions.Converters.Add(new AULocalAccountIdentificationJsonConverter());
            _jsonOptions.Converters.Add(new AccountHolderJsonConverter());
            _jsonOptions.Converters.Add(new AccountHolderCapabilityJsonConverter());
            _jsonOptions.Converters.Add(new AccountHolderInfoJsonConverter());
            _jsonOptions.Converters.Add(new AccountHolderUpdateRequestJsonConverter());
            _jsonOptions.Converters.Add(new AccountSupportingEntityCapabilityJsonConverter());
            _jsonOptions.Converters.Add(new ActiveNetworkTokensRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new AdditionalBankIdentificationJsonConverter());
            _jsonOptions.Converters.Add(new AdditionalBankIdentificationRequirementJsonConverter());
            _jsonOptions.Converters.Add(new AddressJsonConverter());
            _jsonOptions.Converters.Add(new AddressRequirementJsonConverter());
            _jsonOptions.Converters.Add(new AmountJsonConverter());
            _jsonOptions.Converters.Add(new AmountMinMaxRequirementJsonConverter());
            _jsonOptions.Converters.Add(new AmountNonZeroDecimalsRequirementJsonConverter());
            _jsonOptions.Converters.Add(new ApproveAssociationRequestJsonConverter());
            _jsonOptions.Converters.Add(new ApproveAssociationResponseJsonConverter());
            _jsonOptions.Converters.Add(new ApproveTransferLimitRequestJsonConverter());
            _jsonOptions.Converters.Add(new AssociationJsonConverter());
            _jsonOptions.Converters.Add(new AssociationDelegatedAuthenticationDataJsonConverter());
            _jsonOptions.Converters.Add(new AssociationFinaliseRequestJsonConverter());
            _jsonOptions.Converters.Add(new AssociationFinaliseResponseJsonConverter());
            _jsonOptions.Converters.Add(new AssociationInitiateRequestJsonConverter());
            _jsonOptions.Converters.Add(new AssociationInitiateResponseJsonConverter());
            _jsonOptions.Converters.Add(new AssociationListingJsonConverter());
            _jsonOptions.Converters.Add(new AssociationStatusJsonConverter());
            _jsonOptions.Converters.Add(new AssociationStatusNullableJsonConverter());
            _jsonOptions.Converters.Add(new AuthenticationJsonConverter());
            _jsonOptions.Converters.Add(new AuthorisedCardUsersJsonConverter());
            _jsonOptions.Converters.Add(new BRLocalAccountIdentificationJsonConverter());
            _jsonOptions.Converters.Add(new BalanceJsonConverter());
            _jsonOptions.Converters.Add(new BalanceAccountJsonConverter());
            _jsonOptions.Converters.Add(new BalanceAccountBaseJsonConverter());
            _jsonOptions.Converters.Add(new BalanceAccountInfoJsonConverter());
            _jsonOptions.Converters.Add(new BalanceAccountUpdateRequestJsonConverter());
            _jsonOptions.Converters.Add(new BalancePlatformJsonConverter());
            _jsonOptions.Converters.Add(new BalanceSweepConfigurationsResponseJsonConverter());
            _jsonOptions.Converters.Add(new BalanceWebhookSettingJsonConverter());
            _jsonOptions.Converters.Add(new BalanceWebhookSettingInfoJsonConverter());
            _jsonOptions.Converters.Add(new BalanceWebhookSettingInfoUpdateJsonConverter());
            _jsonOptions.Converters.Add(new BankAccountJsonConverter());
            _jsonOptions.Converters.Add(new BankAccountAccountIdentificationJsonConverter());
            _jsonOptions.Converters.Add(new BankAccountDetailsJsonConverter());
            _jsonOptions.Converters.Add(new BankAccountIdentificationTypeRequirementJsonConverter());
            _jsonOptions.Converters.Add(new BankAccountIdentificationValidationRequestJsonConverter());
            _jsonOptions.Converters.Add(new BankAccountIdentificationValidationRequestAccountIdentificationJsonConverter());
            _jsonOptions.Converters.Add(new BankAccountModelJsonConverter());
            _jsonOptions.Converters.Add(new BankIdentificationJsonConverter());
            _jsonOptions.Converters.Add(new BeginScaDeviceRegistrationRequestJsonConverter());
            _jsonOptions.Converters.Add(new BeginScaDeviceRegistrationResponseJsonConverter());
            _jsonOptions.Converters.Add(new BrandVariantsRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new BulkAddressJsonConverter());
            _jsonOptions.Converters.Add(new CALocalAccountIdentificationJsonConverter());
            _jsonOptions.Converters.Add(new CZLocalAccountIdentificationJsonConverter());
            _jsonOptions.Converters.Add(new CapabilityProblemJsonConverter());
            _jsonOptions.Converters.Add(new CapabilityProblemEntityJsonConverter());
            _jsonOptions.Converters.Add(new CapabilityProblemEntityRecursiveJsonConverter());
            _jsonOptions.Converters.Add(new CapabilitySettingsJsonConverter());
            _jsonOptions.Converters.Add(new CapitalBalanceJsonConverter());
            _jsonOptions.Converters.Add(new CapitalGrantAccountJsonConverter());
            _jsonOptions.Converters.Add(new CardJsonConverter());
            _jsonOptions.Converters.Add(new CardConfigurationJsonConverter());
            _jsonOptions.Converters.Add(new CardInfoJsonConverter());
            _jsonOptions.Converters.Add(new CardOrderJsonConverter());
            _jsonOptions.Converters.Add(new CardOrderItemJsonConverter());
            _jsonOptions.Converters.Add(new CardOrderItemDeliveryStatusJsonConverter());
            _jsonOptions.Converters.Add(new ConditionJsonConverter());
            _jsonOptions.Converters.Add(new ContactDetailsJsonConverter());
            _jsonOptions.Converters.Add(new CounterpartyJsonConverter());
            _jsonOptions.Converters.Add(new CounterpartyBankRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new CounterpartyTypesRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new CountriesRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new CreateScaInformationJsonConverter());
            _jsonOptions.Converters.Add(new CreateSweepConfigurationV2JsonConverter());
            _jsonOptions.Converters.Add(new CreateTransferLimitRequestJsonConverter());
            _jsonOptions.Converters.Add(new DKLocalAccountIdentificationJsonConverter());
            _jsonOptions.Converters.Add(new DayOfWeekRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new DefaultErrorResponseEntityJsonConverter());
            _jsonOptions.Converters.Add(new DelegatedAuthenticationDataJsonConverter());
            _jsonOptions.Converters.Add(new DeliveryAddressJsonConverter());
            _jsonOptions.Converters.Add(new DeliveryContactJsonConverter());
            _jsonOptions.Converters.Add(new DeviceJsonConverter());
            _jsonOptions.Converters.Add(new DeviceInfoJsonConverter());
            _jsonOptions.Converters.Add(new DifferentCurrenciesRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new DurationJsonConverter());
            _jsonOptions.Converters.Add(new EntryModesRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new ExpiryJsonConverter());
            _jsonOptions.Converters.Add(new FeeJsonConverter());
            _jsonOptions.Converters.Add(new FinishScaDeviceRegistrationRequestJsonConverter());
            _jsonOptions.Converters.Add(new FinishScaDeviceRegistrationResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetNetworkTokenResponseJsonConverter());
            _jsonOptions.Converters.Add(new GetTaxFormResponseJsonConverter());
            _jsonOptions.Converters.Add(new GrantLimitJsonConverter());
            _jsonOptions.Converters.Add(new GrantOfferJsonConverter());
            _jsonOptions.Converters.Add(new GrantOffersJsonConverter());
            _jsonOptions.Converters.Add(new HKLocalAccountIdentificationJsonConverter());
            _jsonOptions.Converters.Add(new HULocalAccountIdentificationJsonConverter());
            _jsonOptions.Converters.Add(new HrefJsonConverter());
            _jsonOptions.Converters.Add(new IbanAccountIdentificationJsonConverter());
            _jsonOptions.Converters.Add(new IbanAccountIdentificationRequirementJsonConverter());
            _jsonOptions.Converters.Add(new InternationalTransactionRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new InvalidFieldJsonConverter());
            _jsonOptions.Converters.Add(new LimitStatusJsonConverter());
            _jsonOptions.Converters.Add(new LimitStatusNullableJsonConverter());
            _jsonOptions.Converters.Add(new LinkJsonConverter());
            _jsonOptions.Converters.Add(new ListAssociationsResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListNetworkTokensResponseJsonConverter());
            _jsonOptions.Converters.Add(new MatchingTransactionsRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new MatchingValuesRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new MccsRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new MerchantAcquirerPairJsonConverter());
            _jsonOptions.Converters.Add(new MerchantNamesRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new MerchantsRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new NOLocalAccountIdentificationJsonConverter());
            _jsonOptions.Converters.Add(new NZLocalAccountIdentificationJsonConverter());
            _jsonOptions.Converters.Add(new NameJsonConverter());
            _jsonOptions.Converters.Add(new NetworkTokenJsonConverter());
            _jsonOptions.Converters.Add(new NetworkTokenActivationDataRequestJsonConverter());
            _jsonOptions.Converters.Add(new NetworkTokenActivationDataResponseJsonConverter());
            _jsonOptions.Converters.Add(new NetworkTokenRequestorJsonConverter());
            _jsonOptions.Converters.Add(new NumberAndBicAccountIdentificationJsonConverter());
            _jsonOptions.Converters.Add(new PLLocalAccountIdentificationJsonConverter());
            _jsonOptions.Converters.Add(new PaginatedAccountHoldersResponseJsonConverter());
            _jsonOptions.Converters.Add(new PaginatedBalanceAccountsResponseJsonConverter());
            _jsonOptions.Converters.Add(new PaginatedGetCardOrderItemResponseJsonConverter());
            _jsonOptions.Converters.Add(new PaginatedGetCardOrderResponseJsonConverter());
            _jsonOptions.Converters.Add(new PaginatedPaymentInstrumentsResponseJsonConverter());
            _jsonOptions.Converters.Add(new PaymentInstrumentJsonConverter());
            _jsonOptions.Converters.Add(new PaymentInstrumentAdditionalBankAccountIdentificationsInnerJsonConverter());
            _jsonOptions.Converters.Add(new PaymentInstrumentGroupJsonConverter());
            _jsonOptions.Converters.Add(new PaymentInstrumentGroupInfoJsonConverter());
            _jsonOptions.Converters.Add(new PaymentInstrumentInfoJsonConverter());
            _jsonOptions.Converters.Add(new PaymentInstrumentRequirementJsonConverter());
            _jsonOptions.Converters.Add(new PaymentInstrumentRevealInfoJsonConverter());
            _jsonOptions.Converters.Add(new PaymentInstrumentRevealRequestJsonConverter());
            _jsonOptions.Converters.Add(new PaymentInstrumentRevealResponseJsonConverter());
            _jsonOptions.Converters.Add(new PaymentInstrumentUpdateRequestJsonConverter());
            _jsonOptions.Converters.Add(new PhoneJsonConverter());
            _jsonOptions.Converters.Add(new PhoneInfoJsonConverter());
            _jsonOptions.Converters.Add(new PhoneNumberJsonConverter());
            _jsonOptions.Converters.Add(new PinChangeRequestJsonConverter());
            _jsonOptions.Converters.Add(new PinChangeResponseJsonConverter());
            _jsonOptions.Converters.Add(new PlatformPaymentConfigurationJsonConverter());
            _jsonOptions.Converters.Add(new ProcessingTypesRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new PublicKeyResponseJsonConverter());
            _jsonOptions.Converters.Add(new RegisterSCAFinalResponseJsonConverter());
            _jsonOptions.Converters.Add(new RegisterSCARequestJsonConverter());
            _jsonOptions.Converters.Add(new RegisterSCAResponseJsonConverter());
            _jsonOptions.Converters.Add(new RemediatingActionJsonConverter());
            _jsonOptions.Converters.Add(new RemoveAssociationRequestJsonConverter());
            _jsonOptions.Converters.Add(new RepaymentJsonConverter());
            _jsonOptions.Converters.Add(new RepaymentTermJsonConverter());
            _jsonOptions.Converters.Add(new RestServiceErrorJsonConverter());
            _jsonOptions.Converters.Add(new RevealPinRequestJsonConverter());
            _jsonOptions.Converters.Add(new RevealPinResponseJsonConverter());
            _jsonOptions.Converters.Add(new RiskScoresJsonConverter());
            _jsonOptions.Converters.Add(new RiskScoresRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new SELocalAccountIdentificationJsonConverter());
            _jsonOptions.Converters.Add(new SGLocalAccountIdentificationJsonConverter());
            _jsonOptions.Converters.Add(new SameAmountRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new SameCounterpartyRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new ScaDeviceJsonConverter());
            _jsonOptions.Converters.Add(new ScaDeviceTypeJsonConverter());
            _jsonOptions.Converters.Add(new ScaDeviceTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new ScaEntityJsonConverter());
            _jsonOptions.Converters.Add(new ScaEntityTypeJsonConverter());
            _jsonOptions.Converters.Add(new ScaEntityTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new ScaExemptionJsonConverter());
            _jsonOptions.Converters.Add(new ScaExemptionNullableJsonConverter());
            _jsonOptions.Converters.Add(new ScaInformationJsonConverter());
            _jsonOptions.Converters.Add(new ScaStatusJsonConverter());
            _jsonOptions.Converters.Add(new ScaStatusNullableJsonConverter());
            _jsonOptions.Converters.Add(new ScopeJsonConverter());
            _jsonOptions.Converters.Add(new ScopeNullableJsonConverter());
            _jsonOptions.Converters.Add(new SearchRegisteredDevicesResponseJsonConverter());
            _jsonOptions.Converters.Add(new SettingTypeJsonConverter());
            _jsonOptions.Converters.Add(new SettingTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new SourceAccountTypesRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new StringMatchJsonConverter());
            _jsonOptions.Converters.Add(new SubmitScaAssociationRequestJsonConverter());
            _jsonOptions.Converters.Add(new SubmitScaAssociationResponseJsonConverter());
            _jsonOptions.Converters.Add(new SweepConfigurationV2JsonConverter());
            _jsonOptions.Converters.Add(new SweepCounterpartyJsonConverter());
            _jsonOptions.Converters.Add(new SweepScheduleJsonConverter());
            _jsonOptions.Converters.Add(new TargetJsonConverter());
            _jsonOptions.Converters.Add(new TargetUpdateJsonConverter());
            _jsonOptions.Converters.Add(new ThresholdRepaymentJsonConverter());
            _jsonOptions.Converters.Add(new TimeOfDayJsonConverter());
            _jsonOptions.Converters.Add(new TimeOfDayRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new TokenRequestorsRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new TotalAmountRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new TransactionRuleJsonConverter());
            _jsonOptions.Converters.Add(new TransactionRuleEntityKeyJsonConverter());
            _jsonOptions.Converters.Add(new TransactionRuleInfoJsonConverter());
            _jsonOptions.Converters.Add(new TransactionRuleIntervalJsonConverter());
            _jsonOptions.Converters.Add(new TransactionRuleResponseJsonConverter());
            _jsonOptions.Converters.Add(new TransactionRuleRestrictionsJsonConverter());
            _jsonOptions.Converters.Add(new TransactionRulesResponseJsonConverter());
            _jsonOptions.Converters.Add(new TransferLimitJsonConverter());
            _jsonOptions.Converters.Add(new TransferLimitListResponseJsonConverter());
            _jsonOptions.Converters.Add(new TransferRouteJsonConverter());
            _jsonOptions.Converters.Add(new TransferRouteRequestJsonConverter());
            _jsonOptions.Converters.Add(new TransferRouteRequirementsInnerJsonConverter());
            _jsonOptions.Converters.Add(new TransferRouteResponseJsonConverter());
            _jsonOptions.Converters.Add(new TransferTypeJsonConverter());
            _jsonOptions.Converters.Add(new TransferTypeNullableJsonConverter());
            _jsonOptions.Converters.Add(new UKLocalAccountIdentificationJsonConverter());
            _jsonOptions.Converters.Add(new USInstantPayoutAddressRequirementJsonConverter());
            _jsonOptions.Converters.Add(new USInternationalAchAddressRequirementJsonConverter());
            _jsonOptions.Converters.Add(new USInternationalAchPriorityRequirementJsonConverter());
            _jsonOptions.Converters.Add(new USLocalAccountIdentificationJsonConverter());
            _jsonOptions.Converters.Add(new UpdateNetworkTokenRequestJsonConverter());
            _jsonOptions.Converters.Add(new UpdatePaymentInstrumentJsonConverter());
            _jsonOptions.Converters.Add(new UpdateSweepConfigurationV2JsonConverter());
            _jsonOptions.Converters.Add(new VerificationDeadlineJsonConverter());
            _jsonOptions.Converters.Add(new VerificationErrorJsonConverter());
            _jsonOptions.Converters.Add(new VerificationErrorRecursiveJsonConverter());
            _jsonOptions.Converters.Add(new WalletProviderAccountScoreRestrictionJsonConverter());
            _jsonOptions.Converters.Add(new WalletProviderDeviceScoreJsonConverter());
            _jsonOptions.Converters.Add(new WalletProviderDeviceTypeJsonConverter());
            _jsonOptions.Converters.Add(new WebhookSettingJsonConverter());
            _jsonOptions.Converters.Add(new WebhookSettingsJsonConverter());
            JsonSerializerOptionsProvider jsonSerializerOptionsProvider = new(_jsonOptions);
            _services.AddSingleton(jsonSerializerOptionsProvider);
            _services.AddSingleton<IApiFactory, ApiFactory>();
            _services.AddSingleton<AccountHoldersServiceEvents>();
            _services.AddSingleton<AuthorizedCardUsersServiceEvents>();
            _services.AddSingleton<BalanceAccountsServiceEvents>();
            _services.AddSingleton<BalancesServiceEvents>();
            _services.AddSingleton<BankAccountValidationServiceEvents>();
            _services.AddSingleton<CardOrdersServiceEvents>();
            _services.AddSingleton<GrantAccountsServiceEvents>();
            _services.AddSingleton<GrantOffersServiceEvents>();
            _services.AddSingleton<ManageCardPINServiceEvents>();
            _services.AddSingleton<ManageSCADevicesServiceEvents>();
            _services.AddSingleton<NetworkTokensServiceEvents>();
            _services.AddSingleton<PaymentInstrumentGroupsServiceEvents>();
            _services.AddSingleton<PaymentInstrumentsServiceEvents>();
            _services.AddSingleton<PlatformServiceEvents>();
            _services.AddSingleton<SCAAssociationManagementServiceEvents>();
            _services.AddSingleton<SCADeviceManagementServiceEvents>();
            _services.AddSingleton<TransactionRulesServiceEvents>();
            _services.AddSingleton<TransferLimitsBalanceAccountLevelServiceEvents>();
            _services.AddSingleton<TransferLimitsBalancePlatformLevelServiceEvents>();
            _services.AddSingleton<TransferRoutesServiceEvents>();
        }

        /// <summary>
        /// Configures the <see cref="System.Net.Http.HttpClient"/> and <see cref="IHttpClientBuilder"/>.
        /// </summary>
        /// <param name="httpClientOptions">Configures the <see cref="System.Net.Http.HttpClient"/>.</param>
        /// <param name="httpClientBuilderOptions">Configures the <see cref="IHttpClientBuilder"/>.</param>
        /// <returns><see cref="HostConfiguration"/>.</returns>
        public HostConfiguration AddBalancePlatformHttpClients(Action<System.Net.Http.HttpClient>? httpClientOptions = null, Action<IHttpClientBuilder>? httpClientBuilderOptions = null)
        {
            Action<System.Net.Http.HttpClient> httpClientAction = httpClient =>
            {
                // Configure HttpClient set by the user.
                httpClientOptions?.Invoke(httpClient);

                // Set BaseAddress if it's not set.
                if (httpClient.BaseAddress == null)
                    httpClient.BaseAddress = new Uri(UrlBuilderExtensions.ConstructHostUrl(_adyenOptions, BASE_URL));
            };
    
            List<IHttpClientBuilder> builders = new List<IHttpClientBuilder>();

            builders.Add(_services.AddHttpClient<IAccountHoldersService, AccountHoldersService>(httpClientAction));
            builders.Add(_services.AddHttpClient<IAuthorizedCardUsersService, AuthorizedCardUsersService>(httpClientAction));
            builders.Add(_services.AddHttpClient<IBalanceAccountsService, BalanceAccountsService>(httpClientAction));
            builders.Add(_services.AddHttpClient<IBalancesService, BalancesService>(httpClientAction));
            builders.Add(_services.AddHttpClient<IBankAccountValidationService, BankAccountValidationService>(httpClientAction));
            builders.Add(_services.AddHttpClient<ICardOrdersService, CardOrdersService>(httpClientAction));
            builders.Add(_services.AddHttpClient<IGrantAccountsService, GrantAccountsService>(httpClientAction));
            builders.Add(_services.AddHttpClient<IGrantOffersService, GrantOffersService>(httpClientAction));
            builders.Add(_services.AddHttpClient<IManageCardPINService, ManageCardPINService>(httpClientAction));
            builders.Add(_services.AddHttpClient<IManageSCADevicesService, ManageSCADevicesService>(httpClientAction));
            builders.Add(_services.AddHttpClient<INetworkTokensService, NetworkTokensService>(httpClientAction));
            builders.Add(_services.AddHttpClient<IPaymentInstrumentGroupsService, PaymentInstrumentGroupsService>(httpClientAction));
            builders.Add(_services.AddHttpClient<IPaymentInstrumentsService, PaymentInstrumentsService>(httpClientAction));
            builders.Add(_services.AddHttpClient<IPlatformService, PlatformService>(httpClientAction));
            builders.Add(_services.AddHttpClient<ISCAAssociationManagementService, SCAAssociationManagementService>(httpClientAction));
            builders.Add(_services.AddHttpClient<ISCADeviceManagementService, SCADeviceManagementService>(httpClientAction));
            builders.Add(_services.AddHttpClient<ITransactionRulesService, TransactionRulesService>(httpClientAction));
            builders.Add(_services.AddHttpClient<ITransferLimitsBalanceAccountLevelService, TransferLimitsBalanceAccountLevelService>(httpClientAction));
            builders.Add(_services.AddHttpClient<ITransferLimitsBalancePlatformLevelService, TransferLimitsBalancePlatformLevelService>(httpClientAction));
            builders.Add(_services.AddHttpClient<ITransferRoutesService, TransferRoutesService>(httpClientAction));
            
            if (httpClientBuilderOptions != null)
                foreach (IHttpClientBuilder builder in builders)
                    httpClientBuilderOptions(builder);
            
            return this;
        }

        /// <summary>
        /// Configures the <see cref="JsonSerializerOptions"/>.
        /// </summary>
        /// <param name="jsonSerializerOptions">Configures the <see cref="JsonSerializerOptions"/>.</param>
        /// <returns><see cref="HostConfiguration"/>.</returns>
        public HostConfiguration ConfigureJsonOptions(Action<JsonSerializerOptions> jsonSerializerOptions)
        {
            jsonSerializerOptions(_jsonOptions);
            
            return this;
        }

        /// <summary>
        /// Configures the <see cref="AdyenOptions"/> (e.g. Environment, LiveEndpointPrefix).
        /// </summary>
        /// <param name="adyenOptions">Configures the <see cref="AdyenOptions"/>.</param>
        /// <returns><see cref="HostConfiguration"/>.</returns>
        public HostConfiguration ConfigureAdyenOptions(Action<AdyenOptions> adyenOptions)
        {
            adyenOptions(_adyenOptions);
            _services.AddSingleton<ITokenProvider<ApiKeyToken>>(
                new TokenProvider<ApiKeyToken>(
                    new ApiKeyToken(_adyenOptions.AdyenApiKey, ClientUtils.ApiKeyHeader.X_API_Key, "")
                )
            );
                    
            return this;
        }
    }
}
