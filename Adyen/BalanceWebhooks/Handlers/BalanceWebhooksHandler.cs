// <auto-generated>
/*
 * Balance webhook
 *
 * Adyen sends webhooks to inform you of balance changes in your balance platform.  You can use the [Configuration API](https://docs.adyen.com/api-explorer/balanceplatform/latest/post/balancePlatforms/(id)/webhooks/(id)/settings) to set the conditions that a balance change must meet for Adyen to send a balance webhook:  - In your entire balance platform - In the balance accounts of specific account holders - In a specific balance account
 *
 * The version of the OpenAPI document: 1
 * Generated by: https://github.com/openapitools/openapi-generator.git
 */

#nullable enable

using Microsoft.Extensions.Logging;
using System.Text.Json;
using Adyen.BalanceWebhooks.Models;

namespace Adyen.BalanceWebhooks.Handlers
{
    /// <summary>
    /// Interface for deserializing webhooks.
    /// </summary>
    public interface IBalanceWebhooksHandler
    {
        /// <summary>
        /// Returns the <see cref="JsonSerializerOptionsProvider"/> to deserialize the json payload from the webhook.
        /// </summary>
        Adyen.BalanceWebhooks.Client.JsonSerializerOptionsProvider JsonSerializerOptionsProvider { get; }
            
        /// <summary>
        /// Uses <see cref="Adyen.BalanceWebhooks.Client.JsonSerializerOptionsProvider"/> to attempt to deserialize <see cref="BalanceAccountBalanceNotificationRequest"/>.
        /// </summary>
        /// <exception cref="JsonException"></exception>
        BalanceAccountBalanceNotificationRequest? DeserializeBalanceAccountBalanceNotificationRequest(string json);
    }

    /// <summary>
    /// Handler utility function used to deserialize BalanceWebhooks.
    /// </summary>
    public partial class BalanceWebhooksHandler : IBalanceWebhooksHandler
    {
        /// <inheritdoc/>
        public Adyen.BalanceWebhooks.Client.JsonSerializerOptionsProvider JsonSerializerOptionsProvider { get; }
        
        /// <summary>
        /// Initializes the handler utility for deserializing BalanceWebhooks.
        /// </summary>
        public BalanceWebhooksHandler(Adyen.BalanceWebhooks.Client.JsonSerializerOptionsProvider jsonSerializerOptionsProvider)
        {
            JsonSerializerOptionsProvider = jsonSerializerOptionsProvider;
        }

        /// <inheritdoc/>
        public BalanceAccountBalanceNotificationRequest? DeserializeBalanceAccountBalanceNotificationRequest(string json)
        {
            return JsonSerializer.Deserialize<BalanceAccountBalanceNotificationRequest>(json, JsonSerializerOptionsProvider.Options);
        }

    }
}
