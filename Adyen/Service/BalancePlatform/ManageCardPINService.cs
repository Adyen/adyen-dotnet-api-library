/*
* Configuration API
*
*
* The version of the OpenAPI document: 2
*
* NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
* https://openapi-generator.tech
* Do not edit the class manually.
*/

using System;
using System.Collections.Generic;
using System.Net.Http;
using System.Threading;
using System.Threading.Tasks;
using Adyen.Model;
using Adyen.Model.BalancePlatform;

namespace Adyen.Service.BalancePlatform
{
    /// <summary>
    /// ManageCardPINService Interface
    /// </summary>
    public interface IManageCardPINService
    {
        /// <summary>
        /// Change a card PIN
        /// </summary>
        /// <param name="pinChangeRequest"><see cref="PinChangeRequest"/> - </param>
        /// <param name="requestOptions"><see cref="RequestOptions"/> - Additional request options.</param>
        /// <returns><see cref="PinChangeResponse"/>.</returns>
        Model.BalancePlatform.PinChangeResponse ChangeCardPin(PinChangeRequest pinChangeRequest = default, RequestOptions requestOptions = default);
        
        /// <summary>
        /// Change a card PIN
        /// </summary>
        /// <param name="pinChangeRequest"><see cref="PinChangeRequest"/> - </param>
        /// <param name="requestOptions"><see cref="RequestOptions"/> - Additional request options.</param>
        /// <param name="cancellationToken"> A CancellationToken enables cooperative cancellation between threads, thread pool work items, or Task objects.</param>
        /// <returns>Task of <see cref="PinChangeResponse"/>.</returns>
        Task<Model.BalancePlatform.PinChangeResponse> ChangeCardPinAsync(PinChangeRequest pinChangeRequest = default, RequestOptions requestOptions = default, CancellationToken cancellationToken = default);
        
        /// <summary>
        /// Get an RSA public key
        /// </summary>
        /// <param name="purpose"><see cref="string"/> - The purpose of the public key.  Possible values: **pinChange**, **pinReveal**, **panReveal**.  Default value: **pinReveal**.</param>
        /// <param name="format"><see cref="string"/> - The encoding format of public key.  Possible values: **jwk**, **pem**.  Default value: **pem**.</param>
        /// <param name="requestOptions"><see cref="RequestOptions"/> - Additional request options.</param>
        /// <returns><see cref="PublicKeyResponse"/>.</returns>
        Model.BalancePlatform.PublicKeyResponse PublicKey(string purpose = default, string format = default, RequestOptions requestOptions = default);
        
        /// <summary>
        /// Get an RSA public key
        /// </summary>
        /// <param name="purpose"><see cref="string"/> - The purpose of the public key.  Possible values: **pinChange**, **pinReveal**, **panReveal**.  Default value: **pinReveal**.</param>
        /// <param name="format"><see cref="string"/> - The encoding format of public key.  Possible values: **jwk**, **pem**.  Default value: **pem**.</param>
        /// <param name="requestOptions"><see cref="RequestOptions"/> - Additional request options.</param>
        /// <param name="cancellationToken"> A CancellationToken enables cooperative cancellation between threads, thread pool work items, or Task objects.</param>
        /// <returns>Task of <see cref="PublicKeyResponse"/>.</returns>
        Task<Model.BalancePlatform.PublicKeyResponse> PublicKeyAsync(string purpose = default, string format = default, RequestOptions requestOptions = default, CancellationToken cancellationToken = default);
        
        /// <summary>
        /// Reveal a card PIN
        /// </summary>
        /// <param name="revealPinRequest"><see cref="RevealPinRequest"/> - </param>
        /// <param name="requestOptions"><see cref="RequestOptions"/> - Additional request options.</param>
        /// <returns><see cref="RevealPinResponse"/>.</returns>
        Model.BalancePlatform.RevealPinResponse RevealCardPin(RevealPinRequest revealPinRequest = default, RequestOptions requestOptions = default);
        
        /// <summary>
        /// Reveal a card PIN
        /// </summary>
        /// <param name="revealPinRequest"><see cref="RevealPinRequest"/> - </param>
        /// <param name="requestOptions"><see cref="RequestOptions"/> - Additional request options.</param>
        /// <param name="cancellationToken"> A CancellationToken enables cooperative cancellation between threads, thread pool work items, or Task objects.</param>
        /// <returns>Task of <see cref="RevealPinResponse"/>.</returns>
        Task<Model.BalancePlatform.RevealPinResponse> RevealCardPinAsync(RevealPinRequest revealPinRequest = default, RequestOptions requestOptions = default, CancellationToken cancellationToken = default);
        
    }
    
    /// <summary>
    /// Represents a collection of functions to interact with the ManageCardPINService API endpoints
    /// </summary>
    public class ManageCardPINService : AbstractService, IManageCardPINService
    {
        private readonly string _baseUrl;
        
        public ManageCardPINService(AdyenClient adyenClient) : base(adyenClient)
        {
            _baseUrl = CreateBaseUrl("https://balanceplatform-api-test.adyen.com/bcl/v2");
        }
        
        public Model.BalancePlatform.PinChangeResponse ChangeCardPin(PinChangeRequest pinChangeRequest = default, RequestOptions requestOptions = default)
        {
            return ChangeCardPinAsync(pinChangeRequest, requestOptions).ConfigureAwait(false).GetAwaiter().GetResult();
        }

        public async Task<Model.BalancePlatform.PinChangeResponse> ChangeCardPinAsync(PinChangeRequest pinChangeRequest = default, RequestOptions requestOptions = default, CancellationToken cancellationToken = default)
        {
            var endpoint = _baseUrl + "/pins/change";
            var resource = new ServiceResource(this, endpoint);
            return await resource.RequestAsync<Model.BalancePlatform.PinChangeResponse>(pinChangeRequest.ToJson(), requestOptions, new HttpMethod("POST"), cancellationToken).ConfigureAwait(false);
        }
        
        public Model.BalancePlatform.PublicKeyResponse PublicKey(string purpose = default, string format = default, RequestOptions requestOptions = default)
        {
            return PublicKeyAsync(purpose, format, requestOptions).ConfigureAwait(false).GetAwaiter().GetResult();
        }

        public async Task<Model.BalancePlatform.PublicKeyResponse> PublicKeyAsync(string purpose = default, string format = default, RequestOptions requestOptions = default, CancellationToken cancellationToken = default)
        {
            // Build the query string
            var queryParams = new Dictionary<string, string>();
            if (purpose != null) queryParams.Add("purpose", purpose);
            if (format != null) queryParams.Add("format", format);
            var endpoint = _baseUrl + "/publicKey" + ToQueryString(queryParams);
            var resource = new ServiceResource(this, endpoint);
            return await resource.RequestAsync<Model.BalancePlatform.PublicKeyResponse>(null, requestOptions, new HttpMethod("GET"), cancellationToken).ConfigureAwait(false);
        }
        
        public Model.BalancePlatform.RevealPinResponse RevealCardPin(RevealPinRequest revealPinRequest = default, RequestOptions requestOptions = default)
        {
            return RevealCardPinAsync(revealPinRequest, requestOptions).ConfigureAwait(false).GetAwaiter().GetResult();
        }

        public async Task<Model.BalancePlatform.RevealPinResponse> RevealCardPinAsync(RevealPinRequest revealPinRequest = default, RequestOptions requestOptions = default, CancellationToken cancellationToken = default)
        {
            var endpoint = _baseUrl + "/pins/reveal";
            var resource = new ServiceResource(this, endpoint);
            return await resource.RequestAsync<Model.BalancePlatform.RevealPinResponse>(revealPinRequest.ToJson(), requestOptions, new HttpMethod("POST"), cancellationToken).ConfigureAwait(false);
        }
    }
}