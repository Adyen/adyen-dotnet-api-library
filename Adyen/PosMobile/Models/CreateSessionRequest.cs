// <auto-generated>
/*
 * POS Mobile API
 *
 * The POS Mobile API is used in the mutual authentication flow between an Adyen Android or iOS [POS Mobile SDK](https://docs.adyen.com/point-of-sale/ipp-mobile/) and the Adyen payments platform. The POS Mobile SDK for Android or iOS devices enables businesses to accept in-person payments using a commercial off-the-shelf (COTS) device like a phone. For example, Tap to Pay transactions, or transactions on a mobile device in combination with a card reader.  ## Authentication Each request to the POS Mobile API must be signed with an API key. [Generate your API key](https://docs.adyen.com/development-resources/api-credentials#generate-api-key) in the Customer Area and then set this key to the `X-API-Key` header value. You also need to have a [client key](https://docs.adyen.com/development-resources/client-side-authentication/). The client key is part of the setup but you won't need to use it in your integration later. Therefore, you don't need to specify allowed origins, and you don't need to store the key in your system.  To access the live endpoints, you need to generate a new API key and client key in your live Customer Area. ## Versioning  The POS Mobile API handles versioning as part of the endpoint URL.  For example: ``` https://checkout-test.adyen.com/checkout/possdk/v68/sessions ```  ## Going live  To access the live endpoints, you need an API key and client key from your live Customer Area.  The live endpoint URLs contain a prefix which is unique to your company account, for example: ``` https://{PREFIX}-checkout-live.adyenpayments.com/checkout/possdk/v68/sessions ```      
 *
 * The version of the OpenAPI document: 68
 * Generated by: https://github.com/openapitools/openapi-generator.git
 */

#nullable enable

using System;
using System.Collections;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.IO;
using System.Text;
using System.Text.RegularExpressions;
using System.Text.Json;
using System.Text.Json.Serialization;
using System.ComponentModel.DataAnnotations;
using Adyen.Core;
using Adyen.PosMobile.Client;

namespace Adyen.PosMobile.Models
{
    /// <summary>
    /// CreateSessionRequest.
    /// </summary>
    public partial class CreateSessionRequest : IValidatableObject
    {
        /// <summary>
        /// Initializes a new instance of the <see cref="CreateSessionRequest" /> class.
        /// </summary>
        /// <param name="merchantAccount">The unique identifier of your merchant account.</param>
        /// <param name="setupToken">The setup token provided by the POS Mobile SDK.  - When using the Android POS Mobile SDK, obtain the token through the &#x60;AuthenticationService.authenticate(setupToken)&#x60; callback of &#x60;AuthenticationService&#x60;.  - When using the iOS POS Mobile SDK, obtain the token through the &#x60;PaymentServiceDelegate.register(with:)&#x60; callback of &#x60;PaymentServiceDelegate&#x60;.</param>
        /// <param name="store">The unique identifier of the store that you want to process transactions for.</param>
        [JsonConstructor]
        public CreateSessionRequest(string merchantAccount, string setupToken, Option<string?> store = default)
        {
            MerchantAccount = merchantAccount;
            SetupToken = setupToken;
            _StoreOption = store;
            OnCreated();
        }
        
        /// <summary>
        /// Best practice: Use the parameterized constructor above to initialize your objects to understand which parameters are required.
        /// </summary>
        public CreateSessionRequest()
        {
        }

        partial void OnCreated();

        /// <summary>
        /// The unique identifier of your merchant account.
        /// </summary>
        /// <value>The unique identifier of your merchant account.</value>
        [JsonPropertyName("merchantAccount")]
        public string MerchantAccount { get; set; }

        /// <summary>
        /// The setup token provided by the POS Mobile SDK.  - When using the Android POS Mobile SDK, obtain the token through the &#x60;AuthenticationService.authenticate(setupToken)&#x60; callback of &#x60;AuthenticationService&#x60;.  - When using the iOS POS Mobile SDK, obtain the token through the &#x60;PaymentServiceDelegate.register(with:)&#x60; callback of &#x60;PaymentServiceDelegate&#x60;.
        /// </summary>
        /// <value>The setup token provided by the POS Mobile SDK.  - When using the Android POS Mobile SDK, obtain the token through the &#x60;AuthenticationService.authenticate(setupToken)&#x60; callback of &#x60;AuthenticationService&#x60;.  - When using the iOS POS Mobile SDK, obtain the token through the &#x60;PaymentServiceDelegate.register(with:)&#x60; callback of &#x60;PaymentServiceDelegate&#x60;.</value>
        [JsonPropertyName("setupToken")]
        public string SetupToken { get; set; }

        /// <summary>
        /// Used to track the state of Store
        /// </summary>
        [JsonIgnore]
        [global::System.ComponentModel.EditorBrowsable(global::System.ComponentModel.EditorBrowsableState.Never)]
        public Option<string?> _StoreOption { get; private set; }

        /// <summary>
        /// The unique identifier of the store that you want to process transactions for.
        /// </summary>
        /// <value>The unique identifier of the store that you want to process transactions for.</value>
        [JsonPropertyName("store")]
        public string? Store { get { return this._StoreOption; } set { this._StoreOption = new(value); } }

        /// <summary>
        /// Returns the string presentation of the object
        /// </summary>
        /// <returns>String presentation of the object</returns>
        public override string ToString()
        {
            StringBuilder sb = new StringBuilder();
            sb.Append("class CreateSessionRequest {\n");
            sb.Append("  MerchantAccount: ").Append(MerchantAccount).Append("\n");
            sb.Append("  SetupToken: ").Append(SetupToken).Append("\n");
            sb.Append("  Store: ").Append(Store).Append("\n");
            sb.Append("}\n");
            return sb.ToString();
        }

        /// <summary>
        /// To validate all properties of the instance
        /// </summary>
        /// <param name="validationContext">Validation context</param>
        /// <returns>Validation Result</returns>
        IEnumerable<ValidationResult> IValidatableObject.Validate(ValidationContext validationContext)
        {
            // SetupToken (string) maxLength
            if (this.SetupToken != null && this.SetupToken.Length > 50000)
            {
                yield return new ValidationResult("Invalid value for SetupToken, length must be less than 50000.", new [] { "SetupToken" });
            }

            yield break;
        }
    }

    /// <summary>
    /// A Json converter for type <see cref="CreateSessionRequest" />
    /// </summary>
    public class CreateSessionRequestJsonConverter : JsonConverter<CreateSessionRequest>
    {
        /// <summary>
        /// Deserializes json to <see cref="CreateSessionRequest"/>.
        /// </summary>
        /// <param name="utf8JsonReader"><see cref="Utf8JsonReader"/>.</param>
        /// <param name="typeToConvert"><see cref="Type"/>.</param>
        /// <param name="jsonSerializerOptions">The <see cref="JsonSerializerOptions"/>, initialized from <see cref="HostConfiguration"/>.</param>
        /// <returns><see cref="CreateSessionRequest"/>.</returns>
        /// <exception cref="JsonException"></exception>
        public override CreateSessionRequest Read(ref Utf8JsonReader utf8JsonReader, Type typeToConvert, JsonSerializerOptions jsonSerializerOptions)
        {
            int currentDepth = utf8JsonReader.CurrentDepth;

            if (utf8JsonReader.TokenType != JsonTokenType.StartObject && utf8JsonReader.TokenType != JsonTokenType.StartArray)
                throw new JsonException();

            JsonTokenType startingTokenType = utf8JsonReader.TokenType;

            Option<string?> merchantAccount = default;
            Option<string?> setupToken = default;
            Option<string?> store = default;

            while (utf8JsonReader.Read())
            {
                if (startingTokenType == JsonTokenType.StartObject && utf8JsonReader.TokenType == JsonTokenType.EndObject && currentDepth == utf8JsonReader.CurrentDepth)
                    break;

                if (startingTokenType == JsonTokenType.StartArray && utf8JsonReader.TokenType == JsonTokenType.EndArray && currentDepth == utf8JsonReader.CurrentDepth)
                    break;

                if (utf8JsonReader.TokenType == JsonTokenType.PropertyName && currentDepth == utf8JsonReader.CurrentDepth - 1)
                {
                    string? jsonPropertyName = utf8JsonReader.GetString();
                    utf8JsonReader.Read();

                    switch (jsonPropertyName)
                    {
                        case "merchantAccount":
                            merchantAccount = new Option<string?>(utf8JsonReader.GetString()!);
                            break;
                        case "setupToken":
                            setupToken = new Option<string?>(utf8JsonReader.GetString()!);
                            break;
                        case "store":
                            store = new Option<string?>(utf8JsonReader.GetString()!);
                            break;
                        default:
                            break;
                    }
                }
            }
            
            if (!merchantAccount.IsSet)
                throw new ArgumentException("Property is required for class CreateSessionRequest.", nameof(merchantAccount));

            if (!setupToken.IsSet)
                throw new ArgumentException("Property is required for class CreateSessionRequest.", nameof(setupToken));

            return new CreateSessionRequest(merchantAccount.Value!, setupToken.Value!, store);
        }

        /// <summary>
        /// Serializes a <see cref="CreateSessionRequest"/>.
        /// </summary>
        /// <param name="writer"><see cref="Utf8JsonWriter"/></param>
        /// <param name="createSessionRequest"></param>
        /// <param name="jsonSerializerOptions"><see cref="JsonSerializerOptions"/></param>
        /// <exception cref="NotImplementedException"></exception>
        public override void Write(Utf8JsonWriter writer, CreateSessionRequest createSessionRequest, JsonSerializerOptions jsonSerializerOptions)
        {
            
            writer.WriteStartObject();
            
            WriteProperties(writer, createSessionRequest, jsonSerializerOptions);
            
            writer.WriteEndObject();
            
        }

        /// <summary>
        /// Serializes the properties of <see cref="CreateSessionRequest"/>.
        /// </summary>
        /// <param name="writer"><see creft="Utf8JsonWriter"/></param>
        /// <param name="createSessionRequest"></param>
        /// <param name="jsonSerializerOptions"><see cref="JsonSerializerOptions"/></param>
        /// <exception cref="NotImplementedException"></exception>
        public void WriteProperties(Utf8JsonWriter writer, CreateSessionRequest createSessionRequest, JsonSerializerOptions jsonSerializerOptions)
        {
            
            if (createSessionRequest.MerchantAccount != null)
                writer.WriteString("merchantAccount", createSessionRequest.MerchantAccount);

            if (createSessionRequest.SetupToken != null)
                writer.WriteString("setupToken", createSessionRequest.SetupToken);

            if (createSessionRequest._StoreOption.IsSet)
                if (createSessionRequest.Store != null)
                    writer.WriteString("store", createSessionRequest.Store);
        }
    }
}
